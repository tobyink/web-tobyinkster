<?xml version="1.0" encoding="UTF-8"?>
<entry xmlns="http://www.w3.org/2005/Atom">
<title>Processing schema.org markup with Perl</title>
<link rel="alternate" type="text/html" href="http://blogs.perl.org/users/toby_inkster/2012/08/processing-schemaorg-markup-with-perl.html" />
<id>tag:blogs.perl.org,2012:/users/toby_inkster//1019.3664</id>
<published>2012-08-07T21:42:00</published>
<updated>2012-08-07T21:42:00</updated>
<summary>Someone on IRC asked me for an example of how to parse schema.org markup using my &#x26;quot;HTML::HTML5::Microdata::Parser&#x26;quot;:https://metacpan.org/module/HTML::HTML5::Microdata::Parser module. So here one is. It pulls the microdata from the page, and queries it using SPARQL.</summary>
<category term="HTML" scheme="http://www.sixapart.com/ns/types#category" />
<category term="HTML" scheme="http://www.sixapart.com/ns/types#category" />
<category term="SemanticWeb" scheme="http://www.sixapart.com/ns/types#category" />
<category term="Web" scheme="http://www.sixapart.com/ns/types#category" />
<content type="html" xml:lang="en" xml:base="http://blogs.perl.org/users/toby_inkster/"><![CDATA[
                            <p>Someone on <span class="caps">IRC </span>asked me for an example of how to parse schema.org markup using my <a href="https://metacpan.org/module/HTML::HTML5::Microdata::Parser"><span class="caps">HTML</span>::HTML5::Microdata::Parser</a> module. So here one is. It pulls the microdata from the page, and queries it using <span class="caps">SPARQL.</span></p>

  <div style="line-height:1.1;font-family:monospace"><span style="color: #000000;"><span class="S2" style="color: #007F00;">#!/usr/bin/env perl</span><br/><br/><span class="S5" style="color: #00007F; font-weight: bold;">use</span><span style="color: #808080;" class="S0"> </span><span class="S11" style="color: #000000;"><span class="caps">HTML</span></span><span style="color: #000000; font-weight: bold;" class="S10">::</span><span style="color: #000000;" class="S11"><span class="caps">HTML5</span></span><span class="S10" style="color: #000000; font-weight: bold;">::</span><span style="color: #000000;" class="S11">Microdata</span><span class="S10" style="color: #000000; font-weight: bold;">::</span><span class="S11" style="color: #000000;">Parser</span><span style="color: #000000; font-weight: bold;" class="S10">;</span><br/><span class="S5" style="color: #00007F; font-weight: bold;">use</span><span class="S0" style="color: #808080;"> </span><span style="color: #000000;" class="S11"><span class="caps">LWP</span></span><span style="color: #000000; font-weight: bold;" class="S10">::</span><span class="S11" style="color: #000000;">Simple</span><span class="S0" style="color: #808080;"> </span><span class="S7" style="color: #7F007F;">'get'</span><span style="color: #000000; font-weight: bold;" class="S10">;</span><br/><span class="S5" style="color: #00007F; font-weight: bold;">use</span><span class="S0" style="color: #808080;"> </span><span class="S11" style="color: #000000;"><span class="caps">RDF</span></span><span style="color: #000000; font-weight: bold;" class="S10">::</span><span class="S11" style="color: #000000;">Query</span><span class="S10" style="color: #000000; font-weight: bold;">;</span><br/><br/><span class="S5" style="color: #00007F; font-weight: bold;">my</span><span style="color: #808080;" class="S0"> </span><span style="background: #FFE0E0; color: #000000; text-decoration: inherit;" class="S12">$uri</span><span class="S0" style="color: #808080;"> </span><span style="color: #000000; font-weight: bold;" class="S10">=</span><span style="color: #808080;" class="S0"> </span><span class="S6" style="color: #7F007F;">"http://buzzword.org.uk/2012/schema-org.html"</span><span class="S10" style="color: #000000; font-weight: bold;">;</span><br/><span style="color: #00007F; font-weight: bold;" class="S5">my</span><span style="color: #808080;" class="S0"> </span><span class="S12" style="background: #FFE0E0; color: #000000; text-decoration: inherit;">$microdata</span><span class="S0" style="color: #808080;"> </span><span style="color: #000000; font-weight: bold;" class="S10">=</span><span class="S0" style="color: #808080;"> </span><span style="color: #000000;" class="S11"><span class="caps">HTML</span></span><span style="color: #000000; font-weight: bold;" class="S10">::</span><span style="color: #000000;" class="S11"><span class="caps">HTML5</span></span><span style="color: #000000; font-weight: bold;" class="S10">::</span><span class="S11" style="color: #000000;">Microdata</span><span style="color: #000000; font-weight: bold;" class="S10">::</span><span class="S11" style="color: #000000;">Parser</span><span class="S10" style="color: #000000; font-weight: bold;">-&gt;</span><span class="S11" style="color: #000000;">new</span><span style="color: #000000; font-weight: bold;" class="S10">(</span><br/><span style="color: #808080;" class="S0">   </span><span class="S11" style="color: #000000;">get</span><span class="S10" style="color: #000000; font-weight: bold;">(</span><span style="background: #FFE0E0; color: #000000; text-decoration: inherit;" class="S12">$uri</span><span class="S10" style="color: #000000; font-weight: bold;">),</span><br/><span class="S0" style="color: #808080;">   </span><span class="S12" style="background: #FFE0E0; color: #000000; text-decoration: inherit;">$uri</span><span class="S10" style="color: #000000; font-weight: bold;">,</span><br/><span style="color: #000000; font-weight: bold;" class="S10">);</span><br/><br/><span class="S5" style="color: #00007F; font-weight: bold;">my</span><span style="color: #808080;" class="S0"> </span><span style="background: #FFE0E0; color: #000000; text-decoration: inherit;" class="S12">$query</span><span style="color: #808080;" class="S0"> </span><span style="color: #000000; font-weight: bold;" class="S10">=</span><span class="S0" style="color: #808080;"> </span><span style="color: #000000;" class="S11"><span class="caps">RDF</span></span><span class="S10" style="color: #000000; font-weight: bold;">::</span><span class="S11" style="color: #000000;">Query</span><span style="color: #000000; font-weight: bold;" class="S10">-&gt;</span><span style="color: #000000;" class="S11">new</span><span style="color: #000000; font-weight: bold;" class="S10">(</span><span style="background: #DDD0DD; color: #000000; text-decoration: inherit;" class="S22">&lt;&lt;'SPARQL'</span><span style="color: #000000; font-weight: bold;" class="S10">);</span><div style="background: #DDD0DD"><span class="S23" style="background: #DDD0DD; color: #7F007F; text-decoration: inherit;"><span class="caps">PREFIX </span>schema: &lt;http://schema.org/&gt;</span><br/><span class="S23" style="background: #DDD0DD; color: #7F007F; text-decoration: inherit;"><span class="caps">SELECT </span>?name ?page</span><br/><span class="S23" style="background: #DDD0DD; color: #7F007F; text-decoration: inherit;"><span class="caps">WHERE </span>{</span><br/><span style="background: #DDD0DD; color: #7F007F; text-decoration: inherit;" class="S23">   ?person</span><br/><span class="S23" style="background: #DDD0DD; color: #7F007F; text-decoration: inherit;">      a schema:Person ;</span><br/><span class="S23" style="background: #DDD0DD; color: #7F007F; text-decoration: inherit;">      schema:name ?name ;</span><br/><span class="S23" style="background: #DDD0DD; color: #7F007F; text-decoration: inherit;">      schema:url ?page .</span><br/><span style="background: #DDD0DD; color: #7F007F; text-decoration: inherit;" class="S23">}</span></div><span style="background: #DDD0DD; color: #7F007F; text-decoration: inherit;" class="S23"><span class="caps">SPARQL</span></span><br/><br/><span class="S5" style="color: #00007F; font-weight: bold;">my</span><span class="S0" style="color: #808080;"> </span><span class="S12" style="background: #FFE0E0; color: #000000; text-decoration: inherit;">$people</span><span style="color: #808080;" class="S0"> </span><span style="color: #000000; font-weight: bold;" class="S10">=</span><span class="S0" style="color: #808080;"> </span><span class="S12" style="background: #FFE0E0; color: #000000; text-decoration: inherit;">$query</span><span class="S10" style="color: #000000; font-weight: bold;">-&gt;</span><span style="color: #000000;" class="S11">execute</span><span class="S10" style="color: #000000; font-weight: bold;">(</span><span style="background: #FFE0E0; color: #000000; text-decoration: inherit;" class="S12">$microdata</span><span class="S10" style="color: #000000; font-weight: bold;">-&gt;</span><span style="color: #000000;" class="S11">graph</span><span class="S10" style="color: #000000; font-weight: bold;">);</span><br/><br/><span style="color: #00007F; font-weight: bold;" class="S5">while</span><span class="S0" style="color: #808080;"> </span><span style="color: #000000; font-weight: bold;" class="S10">(</span><span class="S5" style="color: #00007F; font-weight: bold;">my</span><span style="color: #808080;" class="S0"> </span><span style="background: #FFE0E0; color: #000000; text-decoration: inherit;" class="S12">$person</span><span class="S0" style="color: #808080;"> </span><span style="color: #000000; font-weight: bold;" class="S10">=</span><span class="S0" style="color: #808080;"> </span><span style="background: #FFE0E0; color: #000000; text-decoration: inherit;" class="S12">$people</span><span class="S10" style="color: #000000; font-weight: bold;">-&gt;</span><span style="color: #000000;" class="S11">next</span><span style="color: #000000; font-weight: bold;" class="S10">)</span><br/><span class="S10" style="color: #000000; font-weight: bold;">{</span><br/><span style="color: #808080;" class="S0">   </span><span class="S5" style="color: #00007F; font-weight: bold;">printf</span><span class="S10" style="color: #000000; font-weight: bold;">(</span><br/><span class="S0" style="color: #808080;">      </span><span style="color: #7F007F;" class="S6">"Found person: %s %s\n"</span><span class="S10" style="color: #000000; font-weight: bold;">,</span><br/><span style="color: #808080;" class="S0">      </span><span style="background: #FFE0E0; color: #000000; text-decoration: inherit;" class="S12">$person</span><span style="color: #000000; font-weight: bold;" class="S10">-&gt;{</span><span style="color: #000000;" class="S11">name</span><span class="S10" style="color: #000000; font-weight: bold;">},</span><br/><span style="color: #808080;" class="S0">      </span><span class="S12" style="background: #FFE0E0; color: #000000; text-decoration: inherit;">$person</span><span style="color: #000000; font-weight: bold;" class="S10">-&gt;{</span><span class="S11" style="color: #000000;">page</span><span style="color: #000000; font-weight: bold;" class="S10">},</span><br/><span class="S0" style="color: #808080;">   </span><span class="S10" style="color: #000000; font-weight: bold;">);</span><br/><span class="S10" style="color: #000000; font-weight: bold;">}</span><br/><br/><span class="S0" style="color: #808080;"/></span></div>
                            
                        ]]></content>
</entry>
